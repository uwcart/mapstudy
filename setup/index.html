<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>MapStudy Setup</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <link rel="icon" href="favicon.ico">

        <link rel="stylesheet" href="../css/normalize.css">
        <link rel="stylesheet" href="../js/lib/jquery-ui/jquery-ui.css">
        <link rel="stylesheet" href="../css/style.css">
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <style>
            html, body {
                overflow: auto;
                font-family: Verdana, Geneva, sans-serif;
            }

            header {
                width: 100%;
                padding: 0 5em;
                height: 4em;
                background-color: #FFF;
                position: fixed;
                z-index: 10;
                box-shadow: 0 0 5px black;
            }

            .header-button {
                line-height: 2em;
                margin-top: 0.8em;
                margin-right: 20px;
                color: black;
            }

            .octicon {
                display: inline;
                height: 24px;
                margin: -4px 4px auto auto;
            }

            #container {
                margin: 4em 5em 0;
            }

            form {
                padding: 20px;
            }

            .section, .i-section, .subsection {
                padding: 20px;
                border-radius: 5px;
                background-color: #DDD;
            }

            .subsection {
                border: 1px solid black;
                margin-bottom: 20px;
            }

            .i-section, .mb20 {
                margin-bottom: 20px;
                margin-top: 0;
            }

            .mt20 {
                margin-top: 20px;
            }

            .q, .page, .condition {
                margin: 20px 0;
            }

            .page, .condition {
                border: 1px solid black;
                border-radius: 5px;
                padding: 20px;
            }

            p, .desc {
                font-size: 1.2em;
                margin: 0 0 20px 0;
            }

            h2 {
                margin-top: 0;
            }

            .preview {
                max-height: 4em;
            }

            .buttons {
                margin-top: 20px;
            }

            .remove-button {
                margin-left: 10px;
                cursor: pointer;
            }

            .ar {
                font-size: 2em;
                font-weight: bold;
                vertical-align: -4px;
                font-size: 2em;
                font-weight: bold;
                line-height: 1em;
            }

            .addbutton, .removebutton {
                padding-bottom: 6px;
                margin-top: 20px;
            }

            a.ext:link, a.ext:visited {
                color: black;
                background-image: linear-gradient(transparent, transparent), url("../img/external-black.png");
            }

            a.ext:hover, a.ext:active {
                color: blue;
                background-image: linear-gradient(transparent, transparent), url("../img/external-blue.png");
            }

            a.ext {
                background-position: center right;
                background-repeat: no-repeat;
                padding-right: 13px;
                background-size: 0.6em;
            }

            table {
                margin-top: 5px;
            }

            td {
                padding-right: 5px;
                padding-bottom: 5px;
                text-align: right;
            }

            td input {
                margin-right: 15px;
            }

            td.l-align {
                text-align: left;
            }

            #db td, #email td {
                text-align: left;
                padding-bottom: 20px;
            }

            .nomargin {
                margin: 0;
            }

            .fullwidth {
                width: 100%;
            }

            table.fullwidth {
                table-layout: fixed;
            }

            .i-section table, .i-section th, .i-section td {
                text-align: left;
                padding: 0 10px 0 0;
            }

            .bigtext {
                font-size: 1.2em;
            }

            .option {
                text-align: left;
            }

            span.rank {
                margin-right: 10px;
            }

            .rank-item {
                margin: 0;
                padding: 5px 10px;
                text-align: left;
                width: 110px;
            }

            .condition-page {
                padding: 5px;
            }

            .randomize-inputs {
                text-align: center;
                vertical-align: top;
            }

            .condition-randomize {
                margin-top: 1.3em;
                height: 24px;
            }

            .randomized {
                background-color: #999;
                border-radius: 5px;
                margin: 5px 0;
            }

            .before-randomized {
                border-top-left-radius: 0;
                border-top-right-radius: 0;
                margin-top: 0;
            }

            .after-randomized {
                border-bottom-left-radius: 0;
                border-bottom-right-radius: 0;
                margin-bottom: 0;
            }

            .weight-min {
                margin-left: 50px;
            }

            .weightval {
                font-size: 0.85em;
            }

        </style>

        <header>
            <button id="preview" class="header-button" type="button">Live preview app</button>
            <button id="viewcode" class="header-button" type="button">View generated code</button>
            <a href="https://github.com/uwcart/mapstudy" target="_blank">
                <button id="github" class="header-button" type="button">
                    <svg aria-hidden="true" class="octicon" version="1.1" viewBox="0 0 16 16">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"></path>
                    </svg>
                    Go to GitHub repo
                </button>
            </a>
        </header>

        <div id="container">
            <form class="step" id="styles" autocomplete="off">
                <h1 class="mb20">Step 1. Interface</h1>
                <div class="desc">
                    The first step is to customize the interface that survey participants will see. Use this form to upload a custom logo and change the look of the header, footer, map, and questions sections if you want. All options currently shown are the defaults.
                </div>

                <div class="header q section">
                    <h2>Header</h2>
                    <p>Do you want to include a header? <select class="section-yn bdd yes"></select></p>
                    <div class="hideonno">
                        <input type="hidden" name="0.sectionId" value="header">
                        <div id="header-style">
                            <p><label for='0.cssAttributes.background-color'>Header background color: </label>
                            <input name='0.cssAttributes.background-color' type="color" value="#F79A42"></p>
                            <div class="q custom-css">
                                <p>Add custom CSS? <select class="custom-css-yn bdd no"></select></p>
                                <div id="header-custom-css" class="displayonyes">
                                    Write your custom CSS attributes in the format of a single-level <a class="ext" href="http://json.org/example.html" target="_blank">JSON object</a> below.
                                    <textarea name="0.cssAttributes-{{}}" disabled></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="q header-logo">
                            <p>Do you want a custom logo on the right side of the header? <select class="bdd no"></select></p>
                            <div id="header-logo" class="displayonyes">
                                <label for="header-logo">Logo image URL:</label>
                                <input name="0.logo-url" type="text" placeholder="ex.: img/logo.png" disabled>
                            </div>
                        </div>

                        <div class="q header-content">
                            <p>Do you want to include a title in your header? <select class="bdd yes"></select></p>
                            <div id="header-content" class="hideonno">
                                <label for="0.content">Title text or HTML: </label>
                                <textarea name="0.content" rows="1"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="footer q section">
                    <h2>Footer</h2>
                    <p>Do you want to include a footer? <select class="section-yn bdd yes"></select></p>
                    <div class="hideonno">
                        <input type="hidden" name="1.sectionId" value="footer">
                        <div id="footer-style">
                            <p><label for='1.cssAttributes.background-color'>Footer background color: </label>
                            <input name='1.cssAttributes.background-color' type="color" value="#F79A42"></p>
                            <div class="q custom-css">
                                <p>Add custom CSS? <select class="custom-css-yn bdd no"></select></p>
                                <div id="footer-custom-css" class="displayonyes">
                                    Write your custom CSS attributes in the format of a single-level <a class="ext" href="http://json.org/example.html" target="_blank">JSON object</a> below.
                                    <textarea name="1.cssAttributes-{{}}" disabled></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="q footer-content">
                            <p>Do you want to include text or HTML content in your footer? <select class="bdd yes"></select></p>
                            <div id="footer-content" class="hideonno">
                                <label for="1.content">Footer text or HTML: </label>
                                <textarea name="1.content" rows="1"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="map q section">
                    <h2>Map Section</h2>
                    <div class="q custom-css">
                        <p>Do you want to add custom CSS to the map section? <select class="section-yn bdd no"></select></p>
                        <div id="map-custom-css" class="displayonyes">
                            <input type="hidden" name="2.sectionId" value="m" disabled>
                            Write your custom CSS attributes in the format of a single-level <a class="ext" href="http://json.org/example.html" target="_blank">JSON object</a> below.
                            <textarea name="2.cssAttributes-{{}}" disabled></textarea>
                        </div>
                    </div>
                </div>

                <div class="q questions section">
                    <h2>Questions Section</h2>
                    <div class="q custom-css">
                        <p>Do you want to add custom CSS to the questions section? <select class="section-yn bdd no"></select></p>
                        <div id="questions-custom-css" class="displayonyes">
                            <input type="hidden" name="3.sectionId" name="q" disabled>
                            Write your custom CSS attributes in the format of a single-level <a class="ext" href="http://json.org/example.html" target="_blank">JSON object</a> below.
                            <textarea name="3.cssAttributes-{{}}" disabled></textarea>
                        </div>
                    </div>
                </div>

                <div class="buttons">
                    <button name="next" type="button">Next Step <img src="../img/next.png"></button>
                </div>
            </form>
            
            <form class="step" id="pages" autocomplete="off">
                <h1 class="mb20">Step 2. Pages</h1>
                <div class="desc">
                    Pages are the most important components of your survey application. Each page will include its own map (or no map) and text or questions that accompany that map (or stand alone). For each page you create, if you choose to include a map, the first section of each page form will help you build the map you want to test on that page. The second part of the form will guide you through creating questions.
                </div>

                <div id="page-container"></div>

                <script type="text/template" id="page-template">
                    <h2>Page <span class="pagenum"><%= pagenum %></span></h2>
                    <div class="m-section section q">
                        <h2>Page <span class="pagenum"><%= pagenum %></span> Map</h2>
                        <p>Include a map on this page? <select class="bdd yes maponpage"></select></p>
                        <input type="hidden" name="map.pages.<%= pagenum %>.page" value="<%= pagenum %>">
                        <div id="m-section-<%= pagenum %>-map" class="hideonno">
                            <p>
                                Map library: <select name="map.pages.<%= pagenum %>.library">
                                    <option value="Leaflet">Leaflet</option>
                                    <option disabled>More coming soon...</option>
                                </select>
                            </p>
                            
                            <p>
                                Include a map legend? <select name="map.pages.<%= pagenum %>.mapOptions.legend">
                                    <option value="true">yes</option>
                                    <option value="false">no</option>
                                </select>
                            </p>

                            <p class="q resetButton">
                                Include a reset button? <select class="bdd no resetSelect" name="map.pages.<%= pagenum %>.mapOptions.resetButton"></select>
                            </p>
                            
                            <div class="map-options q">
                                <p class="nomargin"><a class="ext" href="http://leafletjs.com/reference.html#map-options" target="_blank">Map Options</a>:
                                </p>
                                <div class="map-options-inputs"></div>
                            </div>
                            
                            <h3 class="nomargin">Base Layers</h3>
                            <div class="baseLayers q"></div>
                            
                            <h3 class="nomargin">Data Layers</h3>
                            <div class="dataLayers q">
                                <button type="button" class="addlayer addDataLayer addbutton">
                                    <span class="ar">+</span>
                                    Add a data layer
                                </button>
                            </div>
                            
                            <h3 class="nomargin">Interactions</h3>
                            <div class="interactions q">
                                <div>
                                    <p class="zoom-p nomargin">
                                        <input class="i-checkbox" type="checkbox" name="map.pages.<%= pagenum %>.interactions.zoom"> Zoom
                                    </p>
                                    <div class="zoom i-section">
                                        <table>
                                            <tr>
                                                <th>on</th>
                                                <th>off</th>
                                                <th>Interface options</th>
                                            </tr><tr>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.zoom.interface.touch" value="true" checked>
                                                </td>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.zoom.interface.touch" value="false">
                                                </td>
                                                <td>
                                                    Touch
                                                </td>
                                            </tr><tr>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.zoom.interface.scrollWheel" value="true" checked>
                                                </td>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.zoom.interface.scrollWheel" value="false">
                                                </td>
                                                <td>
                                                    Scroll wheel
                                                </td>
                                            </tr><tr>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.zoom.interface.doubleClick" value="true" checked>
                                                </td>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.zoom.interface.doubleClick" value="false">
                                                </td>
                                                <td>
                                                    Double click
                                                </td>
                                            </tr><tr>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.zoom.interface.box" value="true" checked>
                                                </td>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.zoom.interface.box" value="false">
                                                </td>
                                                <td>
                                                    Box
                                                </td>
                                            </tr><tr>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.zoom.interface.keyboard" value="true" checked>
                                                </td>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.zoom.interface.keyboard" value="false">
                                                </td>
                                                <td>
                                                    Keyboard
                                                </td>
                                            </tr><tr>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.zoom.interface.widget" value="true" checked>
                                                </td>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.zoom.interface.widget" value="false">
                                                </td>
                                                <td>
                                                    Widget
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>

                                <div>
                                    <p class="pan-p nomargin">
                                        <input class="i-checkbox" type="checkbox" name="map.pages.<%= pagenum %>.interactions.pan"> Pan
                                    </p>
                                    <div class="pan i-section">
                                        <table>
                                            <tr>
                                                <th>on</th>
                                                <th>off</th>
                                                <th>Interface options</th>
                                            </tr><tr>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.pan.interface.drag" value="true" checked>
                                                </td>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.pan.interface.drag" value="false">
                                                </td>
                                                <td>
                                                    Drag
                                                </td>
                                            </tr><tr>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.pan.interface.keyboard" value="true" checked>
                                                </td>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.pan.interface.keyboard" value="false">
                                                </td>
                                                <td>
                                                    Keyboard
                                                </td>
                                            </tr><tr>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.pan.interface.widget" value="true" checked>
                                                </td>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.pan.interface.widget" value="false">
                                                </td>
                                                <td>
                                                    Widget
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                                
                                <div>
                                    <p class="rotate-p nomargin">
                                        <input class="i-checkbox" type="checkbox" name="map.pages.<%= pagenum %>.interactions.rotate"> Rotate
                                    </p>
                                    <div class="rotate i-section"></div>
                                </div>
                                
                                <div>
                                    <p class="retrieve-p nomargin">
                                        <input class="i-checkbox" type="checkbox" name="map.pages.<%= pagenum %>.interactions.retrieve"> Retrieve
                                    </p>
                                    <div class="retrieve i-section">
                                        <table>
                                            <tr>
                                                <th>on</th>
                                                <th>off</th>
                                                <th>Interface options</th>
                                            </tr><tr>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.retrieve.interface.popup" value="true" checked>
                                                </td>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.retrieve.interface.popup" value="false">
                                                </td>
                                                <td>
                                                    Popups
                                                </td>
                                            </tr><tr>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.retrieve.interface.window" value="true" checked>
                                                </td>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.retrieve.interface.window" value="false">
                                                </td>
                                                <td>
                                                    Window
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                                
                                <div>
                                    <p class="overlay-p nomargin">
                                        <input class="i-checkbox" type="checkbox" name="map.pages.<%= pagenum %>.interactions.overlay"> Overlay
                                    </p>
                                    <div class="overlay i-section">
                                        <div class="interaction-dataLayers">Data layers to include:</div>
                                    </div>
                                </div>
                                
                                <div>
                                    <p class="underlay-p nomargin">
                                        <input class="i-checkbox" type="checkbox" name="map.pages.<%= pagenum %>.interactions.underlay"> Underlay
                                    </p>
                                    <div class="underlay i-section"></div>
                                </div>

                                <div>
                                    <p class="search-p nomargin">
                                        <input class="i-checkbox" type="checkbox" name="map.pages.<%= pagenum %>.interactions.search"> Search
                                    </p>
                                    <div class="search i-section">
                                        <div class="interaction-dataLayers">Data layers to include:</div>
                                    </div>
                                </div>

                                <div>
                                    <p class="filter-p nomargin">
                                        <input class="i-checkbox" type="checkbox" name="map.pages.<%= pagenum %>.interactions.filter"> Filter
                                    </p>
                                    <div class="filter i-section">
                                        <div class="interaction-dataLayers mb20">Data layers to include:</div>
                                        <div class="filter-tool">Filter tool: 
                                            <select name="map.pages.<%= pagenum %>.interactions.filter.tool">
                                                <option value="slider">Slider</option>
                                                <option value="logic">Logic</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div>
                                    <p class="sequence-p nomargin">
                                        <input class="i-checkbox" type="checkbox" name="map.pages.<%= pagenum %>.interactions.sequence"> Sequence
                                    </p>
                                    <div class="sequence i-section">
                                        <div class="interaction-dataLayers mb20">Data layers to include:</div>
                                        <div class="sequence-tool">Sequence tool: 
                                            <select name="map.pages.<%= pagenum %>.interactions.sequence.tool">
                                                <option value="buttons">Buttons</option>
                                                <option value="slider">Slider</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div>
                                    <p class="reexpress-p nomargin">
                                        <input class="i-checkbox" type="checkbox" name="map.pages.<%= pagenum %>.interactions.reexpress"> Reexpress
                                    </p>
                                    <div class="reexpress i-section"></div>
                                </div>

                                <div>
                                    <p class="resymbolize-p nomargin">
                                        <input class="i-checkbox" type="checkbox" name="map.pages.<%= pagenum %>.interactions.resymbolize"> Resymbolize
                                    </p>
                                    <div class="resymbolize i-section">
                                        <table>
                                            <tr>
                                                <th>on</th>
                                                <th>off</th>
                                                <th>Options</th>
                                            </tr><tr>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.resymbolize.reclassify" value="true" checked>
                                                </td>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.resymbolize.reclassify" value="false">
                                                </td>
                                                <td>
                                                    Reclassify
                                                </td>
                                            </tr><tr>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.resymbolize.rescale" value="true" checked>
                                                </td>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.resymbolize.rescale" value="false">
                                                </td>
                                                <td>
                                                    Rescale
                                                </td>
                                            </tr><tr>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.resymbolize.recolor" value="true" checked>
                                                </td>
                                                <td>
                                                    <input type="radio" name="map.pages.<%= pagenum %>.interactions.resymbolize.recolor" value="false">
                                                </td>
                                                <td>
                                                    Recolor
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>

                                <div>
                                    <p class="reset-p nomargin">
                                        <input class="i-checkbox" type="checkbox" name="map.pages.<%= pagenum %>.interactions.reset"> Reset
                                    </p>
                                    <div class="reset i-section"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="q-section section" id="q-section-<%= pagenum %>">
                        <h2>Page <span class="pagenum"><%= pagenum %></span> Questions</h2>

                        <input type="hidden" name="questions.pages.<%= pagenum %>.page" value="<%= pagenum %>">

                        <p>Expand questions section to full page width? <select class="bdd no fullpage" name="questions.pages.<%= pagenum %>.fullpage"></select></p>
                    
                        <h3 class="nomargin">Sets</h3>
                        <div class="mb20">
                            A <em>set</em> consists of all of the questions and text that will be shown at one time. The buttons you create with each set will allow the participant to move back and forth between sets and pages.
                        </div>
                        <div class="sets q"></div>
                    </div>

                    <button type="button" class="removepage removebutton">
                        <span class="ar">-</span>
                        Remove this page
                    </button>
                    <button type="button" class="addpage addbutton">
                        <span class="ar">+</span>
                        Add another page
                    </button>
                </script>


                <!--map options for each map library-->

                <script type="text/template" id="Leaflet-map-options-template">
                    Refer to the documentation at the above link for explanations of the options below.
                    <table>
                    <tr class="Leaflet-mapOptions-center">
                        <td class="l-align">Center (decimal degrees):</td>
                        <td>Latitude:</td>
                        <td><input type="text" name="map.pages.<%= pagenum %>.mapOptions.center.0" size="2" value="0"></td>
                        <td>Longitude:</td>
                        <td><input type="text" name="map.pages.<%= pagenum %>.mapOptions.center.1" size="2" value="0"></td>
                    </tr>
                    <tr class="leaflet-mapOptions-zoom">
                        <td class="l-align">Zoom (integer 0-22):</td>
                        <td>Initial:</td>
                        <td><input type="text" name="map.pages.<%= pagenum %>.mapOptions.zoom" size="2" value="0"></td>
                        <td>Minimum:</td>
                        <td><input type="text" name="map.pages.<%= pagenum %>.mapOptions.minZoom" size="2" value="0"></td>
                        <td>Maximum:</td>
                        <td><input type="text" name="map.pages.<%= pagenum %>.mapOptions.maxZoom" size="2" value="22"></td>
                    </tr>
                    <tr class="leaflet-mapOptions-maxBounds">
                        <td class="l-align">Bounds (decimal degrees):</td>
                        <td>South lat:</td>
                        <td><input type="text" name="map.pages.<%= pagenum %>.mapOptions.maxBounds.0.0" size="2" value="-90"></td>
                        <td>West lon:</td>
                        <td><input type="text" name="map.pages.<%= pagenum %>.mapOptions.maxBounds.0.1" size="2" value="-180"></td>
                        <td>North lat:</td>
                        <td><input type="text" name="map.pages.<%= pagenum %>.mapOptions.maxBounds.1.0" size="2" value="90"></td>
                        <td>East lon:</td>
                        <td><input type="text" name="map.pages.<%= pagenum %>.mapOptions.maxBounds.1.1" size="2" value="180"></td>
                    </tr>
                    <table>
                </script>


                <!--universal baseLayer properties-->

                <script type="text/template" id="baseLayer-template">
                    <div class="mb20"><h3 class="nomargin">Base Layer <span class="layernumber"><%= i+1 %></span></h3></div>
                    <p>Layer name: <input type="text" name="map.pages.<%= pagenum %>.baseLayers.<%= i %>.name"></p>
                    <table class='fullwidth bigtext'>
                    <tr>
                        <td class="l-align" style="width: 84px"><a class="ext sourcelink" target="_blank">Source</a>:</td>
                        <td class="l-align" style="width: 150px"><select class="layer-source-select">
                            <option value="url">URL</option>
                            <option value="provider-name">Provider name</option>
                            <option value="postgis">PostGIS table</option>
                        </select></td>
                        <td class="l-align"><input type="text" class="layer-source-input fullwidth" name="map.pages.<%= pagenum %>.baseLayers.<%= i %>.source"></input></td>
                    </tr>
                    </table>
                    <div>
                        Note: You must provide an external URL or provider name (if a Leaflet tileset) to live preview the layer.
                    </div>

                    <div class="layer-options mt20">
                        <div class="layer-options-inputs"></div>
                        <div class="layer-custom-options q">
                            <p>Add custom layer options? <select class="bdd no"></select></p>
                            <div class="layer-custom-options-textarea displayonyes">
                                Refer to the documentation at the above link for a list of available custom options. Write your custom options in the format of a <a class="ext" href="http://json.org/example.html" target="_blank">JSON object</a> below.
                                <textarea name="map.pages.<%= pagenum %>.baseLayers.<%= i %>.layerOptions"></textarea>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="removelayer removebutton">
                        <span class="ar">-</span>
                        Remove this base layer
                    </button>
                    <button type="button" class="addlayer addbutton">
                        <span class="ar">+</span>
                        Add another base layer
                    </button>
                </script>

                
                <!--baseLayer options for each map library-->

                <script type="text/template" id="Leaflet-baseLayer-options-template">
                    <p class="nomargin"><a class="ext" href="http://leafletjs.com/reference.html#tilelayer-options" target="_blank">Layer Options</a>:
                    </p>
                    <table class="fullwidth">
                        <tr class="Leaflet-baseLayer-options-attribution">
                            <td class="l-align" style="width: 85px">Attribution:</td>
                            <td class="l-align"><input class="fullwidth" type="text" name="map.pages.<%= pagenum %>.baseLayers.<%= i %>.layerOptions.attribution" placeholder="example: Map by Stamen, Data by <a href='http://osm.org'>OpenStreetMap</a> contributors"></td>
                        </tr>
                    </table>
                </script>


                <!--universal dataLayer properties-->

                <script type="text/template" id="dataLayer-template">
                    <div class="mb20"><h3 class="nomargin">Data Layer <span class="layernumber"><%= i+1 %></span></h3></div>

                    <p>Layer name: <input type="text" class="layerName" name="map.pages.<%= pagenum %>.dataLayers.<%= i %>.name"></p>
                    
                    <table class='fullwidth bigtext layer-source'>
                        <tr>
                            <td class="l-align" style="width: 84px"><a class="ext sourcelink" target="_blank">Source</a>:</td>
                            <td class="l-align" style="width: 150px"><select class="layer-source-select">
                                <option value="url">URL</option>
                                <option value="postgis">PostGIS table</option>
                            </select></td>
                            <td class="l-align"><input type="text" class="layer-source-input fullwidth" name="map.pages.<%= pagenum %>.dataLayers.<%= i %>.source" placeholder="example: data/geography.geojson"></input></td>
                        </tr>
                    </table>
                    <div>
                        Note: You must provide an external URL to live preview the layer.
                    </div>
                    
                    <div class="layer-options mt20">
                        <div class="layer-options-inputs"></div>
                        <div class="layer-custom-options q">
                            <p>Add custom layer options? <select class="bdd no"></select></p>
                            <div class="layer-custom-options-textarea displayonyes">
                                Refer to the documentation at the above link for a list of available custom options. Write your custom options in the format of a <a class="ext" href="http://json.org/example.html" target="_blank">JSON object</a> below.
                                <textarea name="map.pages.<%= pagenum %>.dataLayers.<%= i %>.layerOptions"></textarea>
                            </div>
                        </div>
                    </div>

                    <p class="layer-expressedAttribute">Expressed attribute name: <input type="text" name="map.pages.<%= pagenum %>.dataLayers.<%= i %>.expressedAttribute"></p>

                    <p class="nomargin layer-displayAttributes">Display attributes (list attributes separated by commas):</p>
                    <textarea name="map.pages.<%= pagenum %>.dataLayers.<%= i %>.displayAttributes-{[]}"></textarea>

                    <p class="layer-renderOnLoad q">Render layer when map loads? 
                        <select class="bdd yes" name="map.pages.<%= pagenum %>.dataLayers.<%= i %>.renderOnLoad"></select>
                    </p>

                    <h3 class="layer-techniques-title">Layer visualization techniques</h3>
                    <div class="layer-techniques"></div>

                    <button type="button" class="removelayer removebutton">
                        <span class="ar">-</span>
                        Remove this data layer
                    </button>
                    <button type="button" class="addlayer addbutton">
                        <span class="ar">+</span>
                        Add another data layer
                    </button>
                </script>


                <!--technique properties-->

                <script type="text/template" id="technique-template">
                    <div class="mb20"><h3 class="nomargin">Data Layer <span class="layernumber"><%= i+1 %></span> Technique <span class="techniquenumber"><%= ii+1 %></span></h3></div>

                    <p class="technique-type-p nomargin">Technique type: 
                        <select class="technique-type" name="map.pages.<%= pagenum %>.dataLayers.<%= i %>.techniques.<%= ii %>.type">
                            <option value="choropleth">Choropleth</option>
                            <option value="proportional symbol">Proportional Symbol</option>
                            <option value="dot">Dot</option>
                            <option value="isarithmic">Isarithmic</option>
                            <option value="heat">Heat</option>
                        </select>
                    </p>

                    <div class="technique-type-desc" style="margin-bottom: 20px;"></div>

                    <p class="technique-classification-p nomargin">Classification scheme: 
                        <select class="technique-classification" name="map.pages.<%= pagenum %>.dataLayers.<%= i %>.techniques.<%= ii %>.classification">
                            <option value="quantile">Quantile</option>
                            <option value="equal interval">Equal Interval</option>
                            <option value="natural breaks">Natural Breaks</option>
                            <option value="unclassed">Unclassed</option>
                        </select>
                    </p>

                    <div class="classification-type-desc" style="margin-bottom: 20px;"></div>

                    <p class="technique-n-classes-p">Number of classes: 
                        <select class="technique-n-classes">
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5" selected>5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                        </select>
                    </p>

                    <div class="technique-classes"></div>

                    <p class="technique-symbol-p">
                        Symbol: 
                        <select class="technique-symbol">
                            <option value="circle">circle</option>
                            <option value="url">URL</option>
                        </select> 
                        <input class="technique-symbol-url" type="text" name="map.pages.<%= pagenum %>.dataLayers.<%= i %>.techniques.<%= ii %>.symbol">
                    </p>

                    <p class="technique-interval-p">
                        <span class="interval-ratio">Line interval: </span>
                        <input type="text" size="3" name="map.pages.<%= pagenum %>.dataLayers.<%= i %>.techniques.<%= ii %>.interval">
                    </p>

                    <p class="technique-size-p">
                        <span class="dot-line-size">Isarithm width: </span>
                        <input type="text" size="2" name="map.pages.<%= pagenum %>.dataLayers.<%= i %>.techniques.<%= ii %>.size"> 
                        pixels
                    </p>

                    <button type="button" class="removetechnique removebutton">
                        <span class="ar">-</span>
                        Remove this technique
                    </button>
                    <button type="button" class="addtechnique addbutton">
                        <span class="ar">+</span>
                        Add another technique
                    </button>
                </script>

                <script type="text/template" id="color-scale-classes-template">
                    <p>Color scale: <select class="color-classes" name="map.pages.<%= pagenum %>.dataLayers.<%= i %>.techniques.<%= ii %>.classes"></select></p>
                </script>

                <script type="text/template" id="radii-classes-template">
                    <table style="margin-bottom: 20px;">
                        <tr class="bigtext radii-classes">
                            <td class="l-align">Symbol radii:</td>
                        </tr>
                        <tr class="radii-minmax"><td></td></tr>
                    </table>
                </script>

                <script type="text/template" id="color-scale-option-template">
                    <option value="<%= colorcode %>"></option>
                </script>

                <script type="text/template" id="color-swatch-template">
                    <span class="color-swatch" style="background-color: <%= fillColor %>"></span>
                </script>

                <script type="text/template" id="symbol-radius-template">
                    <td><input type="text" size="2" name="map.pages.<%= pagenum %>.dataLayers.<%= i %>.techniques.<%= ii %>.classes-{c}"></td>
                </script>


                <!--dataLayer options for each map library-->

                <script type="text/template" id="Leaflet-dataLayer-options-template">
                    <p class="nomargin"><a class="ext" href="http://leafletjs.com/reference.html#path" target="_blank">Layer Options</a>:
                    </p>
                    Refer to the documentation at the above link for a list of available custom options.
                </script>


                <!--interaction properties-->

                <script type="text/template" id="interaction-logging-template">
                    <div class="interaction-logging mb20">
                        Log this interaction? 
                        <select class="bdd yes" name="map.pages.<%= pagenum %>.interactions.<%= interaction %>.logging"></select>
                    </div>

                    <div class="interaction-toggle mb20">
                        Include toggle switch? 
                        <select class="bdd no" name="map.pages.<%= pagenum %>.interactions.<%= interaction %>.toggle"></select>
                    </div>
                </script>

                <script type="text/template" id="interaction-dataLayer-template">
                    <input type="checkbox" checked> 
                    <span class="dataLayer-layerName"><%= layerName %></span>
                    <input type="hidden" name="map.pages.<%= pagenum %>.interactions.<%= interaction %>.dataLayers-{[]}" value="<%= layerName %>">
                </script>


                <!--question sets-->

                <script type="text/template" id="set-template">
                    <div class="mb20"><h3 class="nomargin">Set <span class="setnumber"><%= i+1 %></span></h3></div>

                    <h3 class="nomargin">Blocks</h3>
                    <div class="mb20"> 
                        A <em>block</em> consists of the question or descriptive text and an input field to allow the participant to respond if a response is required.
                    </div>
                    <div class="blocks"></div>
                    <p class="nomargin">Buttons:</p>
                    <div class="set-buttons">
                        <input type="hidden" name="questions.pages.<%= pagenum %>.sets.<%= i %>.buttons-{[]}" value="">
                        <div><input type="checkbox" class="set-button next"> Next</div>
                        <div><input type="checkbox" class="set-button back"> Back</div>
                        <div><input type="checkbox" class="set-button save"> Save</div>
                        <div><input type="checkbox" class="set-button submit"> Submit</div>
                    </div>

                    <button type="button" class="removeset removebutton">
                        <span class="ar">-</span>
                        Remove this set
                    </button>
                    <button type="button" class="addset addbutton">
                        <span class="ar">+</span>
                        Add another set
                    </button>
                </script>


                <!--question blocks-->

                <script type="text/template" id="block-template">
                    <div class="mb20"><h3 class="nomargin">Set <span class="setnumber"><%= i+1 %> Block <span class="blocknumber"><%= ii+1 %></span></h3></div>
                    
                    <div class="q">
                        <p>Customize block label? <select class="block-label-yn bdd no"></select></p>
                        <div class="block-label displayonyes">
                            Label: <input type="text" name="questions.pages.<%= pagenum %>.sets.<%= i %>.blocks.<%= ii %>.label" value="p<%= pagenum+1 %>s<%= i+1 %>b<%= ii+1 %>" size="20" maxlength="20" disabled>
                        </div>
                    </div>

                    <div class="q">
                        <p>Include title? <select class="title-yn bdd no"></select></p>
                        <div class="title displayonyes">
                            Title: <input type="text" name="questions.pages.<%= pagenum %>.sets.<%= i %>.blocks.<%= ii %>.title" disabled>
                        </div>
                    </div>

                    <p class="nomargin">Ask (may include any text or HTML):</p>
                    <div class="ask mb20">
                        <textarea name="questions.pages.<%= pagenum %>.sets.<%= i %>.blocks.<%= ii %>.ask"></textarea>
                    </div>

                    <div class="q">
                        <p>Include description? <select class="description-yn bdd no"></select></p>
                        <div class="desc displayonyes">
                            Description:
                            <textarea name="questions.pages.<%= pagenum %>.sets.<%= i %>.blocks.<%= ii %>.description" disabled></textarea>
                        </div>
                    </div>

                    <div class="q">
                        <p>Include input? <select class="input-yn bdd yes"></select></p>
                        <div class="input hideonno">
                            <h3>Input</h3>

                            <p class="reqd q">
                                Required question? <select name="questions.pages.<%= pagenum %>.sets.<%= i %>.blocks.<%= ii %>.input.required" class="bdd no"></select>
                            </p>

                            <p class="autoadv q">
                                Auto-advance when participant chooses an option? <select name="questions.pages.<%= pagenum %>.sets.<%= i %>.blocks.<%= ii %>.input.autoadvance" class="bdd no" disabled></select>
                            </p>

                            <div class="input-type bigtext mb20">
                                Input type: 
                                <select class="input-type-select" name="questions.pages.<%= pagenum %>.sets.<%= i %>.blocks.<%= ii %>.input.type">
                                    <option value="text">text</option>
                                    <option value="paragraph">paragraph</option>
                                    <option value="checkboxes">checkboxes</option>
                                    <option value="radios">radios</option>
                                    <option value="dropdown">dropdown</option>
                                    <option value="matrix">matrix</option>
                                    <option value="rank">rank</option>
                                </select>
                            </div>

                            <div class="options-div mb20">
                                <p>Options:</p>
                                <div class="options"></div>
                            </div>

                            <div class="items-div">
                                <p>Items:</p>
                                <div class="items"></div>
                            </div>
                        </div>
                    </div>

                    <button type="button" class="removeblock removebutton">
                        <span class="ar">-</span>
                        Remove this block
                    </button>
                    <button type="button" class="addblock addbutton">
                        <span class="ar">+</span>
                        Add another block
                    </button>
                </script>


                <!--input options-->

                <script type="text/template" id="input-option-template">
                    <div class="mb20"><h3 class="nomargin">Option <span class="optionnumber"><%= iii+1 %></span></h3></div>
                    
                    <p class="option-text">
                        Option text: <input type="text" name="questions.pages.<%= pagenum %>.sets.<%= i %>.blocks.<%= ii %>.input.options.<%= iii %>.text">
                    </p>

                    <div class="q">
                        <p class="option-value-yn">Make value different than text? <select class="bdd no"></select></p>
                        <p class="option-value displayonyes">
                            Option value: <input type="text" name="questions.pages.<%= pagenum %>.sets.<%= i %>.blocks.<%= ii %>.input.options.<%= iii %>.value" disabled>
                        </p>
                    </div>

                    <button type="button" class="removeoption removebutton">
                        <span class="ar">-</span>
                        Remove this option
                    </button>
                    <button type="button" class="addoption addbutton">
                        <span class="ar">+</span>
                        Add another option
                    </button>
                </script>


                <!--input items-->

                <script type="text/template" id="input-item-template">
                    <div class="mb20"><h3 class="nomargin">Item <span class="itemnumber"><%= iii+1 %></span></h3></div>
                    
                    <p class="item-text">
                        Item text: <input type="text" name="questions.pages.<%= pagenum %>.sets.<%= i %>.blocks.<%= ii %>.input.items.<%= iii %>.text">
                    </p>

                    <div class="q">
                        <p class="item-label-yn">Customize item label? <select class="bdd no"></select></p>
                        <p class="item-label displayonyes">
                            Item label: <input type="text" name="questions.pages.<%= pagenum %>.sets.<%= i %>.blocks.<%= ii %>.input.items.<%= iii %>.label" value="p<%= pagenum+1 %>s<%= i+1 %>b<%= ii+1 %>i<%= iii+1 %>" size="20" maxlength="20" disabled>
                        </p>
                    </div>

                    <button type="button" class="removeitem removebutton">
                        <span class="ar">-</span>
                        Remove this item
                    </button>
                    <button type="button" class="additem addbutton">
                        <span class="ar">+</span>
                        Add another item
                    </button>
                </script>

                <div class="buttons">
                    <button name="back" type="button"><img src="../img/back.png"> Back a Step</button>
                    <button name="next" type="button">Next Step <img src="../img/next.png"></button>
                </div>
            </form>
            
            <form class="step q" id="conditions" autocomplete="off">
                <h1 class="mb20">Step 3. Conditions</h1>

                <div class="desc">
                    Conditions determine the order in which pages appear to different groups of study participants. The condition configuration options give you the flexibility to create randomized and factorial study designs. If you do not create any conditions, all participants will see every page in the order in which they are listed in map.json and questions.json.
                </div>

                <div class="section">
                    <h3 id="weight-yn" class="mb20">Weight conditions? <span style="font-weight: normal;"><select class="bdd no"></select></span></h3>
                    <div class="desc nomargin">
                        Condition weights allow you to choose the relative frequency with which each condition is assigned. All condition weights must sum to 1. If not weighted, each condition will be assigned at random with equal frequency.
                    </div>
                </div>

                <div id="condition-container">
                    <div class="condition-add mt20">
                        <button type="button" class="addcondition addbutton nomargin">
                            <span class="ar">+</span>
                            Add a condition
                        </button>
                    </div>
                </div>

                <script type="text/template" id="condition-template">
                    <h2>Condition <span class="conditionnum"><%= conditionnum %></span></h2>
                    <div class="section condition-pages">
                        <h3 class="mb20">Pages</h3>
                        <div class="desc">
                            Drag the pages below to rearrange their order. Check the boxes between pages you would like to be shown to participants in random order. All pages connected to checkboxes that are consecutively checked will be grouped together for randomization.
                        </div>

                        <table class="pages bigtext">
                            <tr>
                                <th>Order</th>
                                <th>Randomize?</th>
                            </tr>
                            <tr>
                                <td class="sortable-pages"></td>
                                <td class="randomize-inputs"></td>
                            </tr>
                        </table>
                    </div>

                    <div class="condition-weight displayonyes section bigtext mt20">
                        Condition weight: 
                        <input type="text" class="weight-val" value="1.000" size="5">
                        <span class="weightval weight-min">0</span>
                        <input type="range" class="condition-weight-slider" name="<%= conditionnum-1 %>.weight" min="0" max="1" step="0.001" value="1.000" style="vertical-align: middle;">
                        <span class="weightval weight-max">1.000</span>
                        <span class="weightval weight-warning">Condition weights must sum to 1.000. Reduce one or more of your weights.</span>
                    </div>

                    <button type="button" class="removecondition removebutton">
                        <span class="ar">-</span>
                        Remove this condition
                    </button>
                    <button type="button" class="addcondition addbutton">
                        <span class="ar">+</span>
                        Add another condition
                    </button>
                </script>

                <script type="text/template" id="condition-page-template">
                    <div class="condition-page">
                        <div class="rank-item">
                            <span class="rank"><%= rank+1 %></span>
                            Page <%= pagenum %>
                            <input type="hidden" name="<%= conditionnum-1 %>.pages.<%= rank %>" value="<%= pagenum %>"> 
                        </div>
                    </div>
                </script>

                <script type="text/template" id="condition-randomize-template">
                    <div class="condition-randomize">
                        <input type="checkbox" class="randomize <%= pagenum-1 %> <%= pagenum %>">
                    </div>
                </script>

                <div class="buttons">
                    <button name="back" type="button"><img src="../img/back.png"> Back a Step</button>
                    <button name="next" type="button">Next Step <img src="../img/next.png"></button>
                </div>
            </form>
            
            <form class="step" id="param" autocomplete="off">
                <h1 class="mb20">Step 4. Server Configuration</h1>

                <div class="desc">
                    Unlike the prior configuration parameters, these will be placed in a php file (param.php) so they are only readable by the host server and remain secure. You may include the e-mail parameters, database parameters, or both; you must completely fill in the fields for at least one of them to receive any data from the application!
                </div>

                <div class="section q">
                    <h3 id="db-yn" class="mb20">
                        Create <a class="ext" href="https://github.com/uwcart/mapstudy#configuring-the-database" target="_blank">database tables</a>? 
                        <span style="font-weight: normal;">
                            <select class="bdd yes"></select>
                        </span>
                    </h3>
                    <div id="db" class="hideonno">
                        <div class="desc bigtext">
                            Make sure you know these values in advance and your database server and firewall are configured to allow incoming traffic from your web server. Otherwise, the connection won't work! Your user must have create, read, and update privileges for the database.
                        </div>

                        <table class="bigtext">
                            <tr id="dbtype">
                                <td>Database type: </td>
                                <td>
                                    <select name="dbtype">
                                        <option value="pgsql" selected>PostgreSQL</option>
                                        <option disabled>More to be added...</option>
                                    </select>
                                </td>
                            </tr>

                            <tr id="dbhost">
                                <td>Hostname: </td>
                                <td><input type="text" name="dbhost"></td>
                            </tr>

                            <tr id="dbport">
                                <td>Port: </td>
                                <td><input type="text" name="dbport"></td>
                            </tr>

                            <tr id="dbname">
                                <td>Database name: </td>
                                <td><input type="text" name="dbname"></td>
                            </tr>

                            <tr id="dbuser">
                                <td>Username: </td>
                                <td><input type="text" name="dbuser"></td>
                            </tr>

                            <tr id="dbpassword">
                                <td>Password: </td>
                                <td>
                                    <input type="password" name="dbpassword"> 
                                    (double-check this one after you download the config files)
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="section q">
                    <h3 id="email-yn" class="mb20">
                        E-mail participant tables? 
                        <span style="font-weight: normal;">
                            <select class="bdd yes"></select>
                        </span>
                    </h3>
                    <div id="email" class="hideonno">
                        <div class="desc bigtext">
                            If these parameters are included, a data table and an interactions table for each participant will be e-mailed to the provided address in CSV format when submitted by the participant. The tables will also be stored in the <em>participants</em> folder in the application directory.
                        </div>

                        <table class="bigtext">
                            <tr id="smtphost">
                                <td>SMTP host address: </td>
                                <td><input type="text" name="smtphost"></td>
                            </tr>

                            <tr id="smtpport">
                                <td>SMTP port: </td>
                                <td>
                                    <input type="text" name="smtpport"> 
                                    (usually this is either 25 or 587)
                                </td>
                            </tr>

                            <tr id="euser">
                                <td>Outgoing e-mail address for the account: </td>
                                <td><input type="email" name="euser"></td>
                            </tr>

                            <tr id="epass">
                                <td>Account password: </td>
                                <td>
                                    <input type="password" name="epass">
                                    (double-check this one after you download the config files)
                                </td>
                            </tr>

                            <tr id="toaddr">
                                <td>E-mail address to send files to: </td>
                                <td><input type="email" name="toaddr"></td>
                            </tr>

                            <tr id="subject">
                                <td>E-mail subject line: </td>
                                <td><input type="text" name="subject"></td>
                            </tr>

                            <tr id="message">
                                <td>E-mail message: </td>
                                <td>
                                    <textarea name="message"></textarea>
                                    (the CSV files will be attached automatically)
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="buttons">
                    <button name="back" type="button"><img src="../img/back.png"> Back a Step</button>
                    <button name="next" type="button">Finish <img src="../img/finish.png"></button>
                </div>
            </form>

            <form class="step" id="finished" autocomplete="off">
                <h1 class="mb20">All Done!</h1>
                <p>Next, unzip the file that just downloaded, and replace the files in the MapStudy "config" directory with its contents. Then your app should be ready to rock!</p>

                <div style="display: none;" id="file-links">
                    <a id="styles-link" target="_blank"></a>
                    <a id="map-link" target="_blank"></a>
                    <a id="questions-link" target="_blank"></a>
                    <a id="conditions-link" target="_blank"></a>
                    <a id="param-link" target="_blank"></a>
                    <a id="preview-link" target="_blank"></a>
                </div>

                <div class="buttons">
                    <button name="back" type="button"><img src="../img/back.png"> Back a Step</button>
                </div>
            </form>
        </div>

        <script type="text/template" id="dropdown-template">
            <select class="<%= classname %>"></select>
        </script>

        <script type="text/template" id="option-template">
            <option value="<%= value %>"><%= option %></option>
        </script>

        <!--external scripts-->

        <script type="text/javascript" src="../js/lib/colorbrewer.js"></script>
        <script type="text/javascript" src="../js/lib/jquery.js"></script>
        <script type="text/javascript" src="../js/lib/jquery-ui/jquery-ui.js"></script>
        <script type="text/javascript" src="../js/lib/underscore.js"></script>
        <script type="text/javascript" src="../js/lib/backbone.js"></script>
        <script type="text/javascript" src="../js/lib/modernizr.js"></script>
        <script type="text/javascript" src="setup.js"></script>
    </body>
</html>